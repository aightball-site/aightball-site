<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>AIght Ball – See the odds, not just the answer</title>
<style>
  :root{
    --bg:#0d0d0d; --fg:#f2f2f2; --muted:#9aa0a6; --card:#121212; --border:#2a2a2a;
    --accent:#33cc99; --accent-hover:#2ab386;
  }
  *{box-sizing:border-box}
  body{margin:0;background:radial-gradient(1000px 600px at 70% -10%, #1a1a1a 0%, #0d0d0d 55%, #070707 100%);color:var(--fg);font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;min-height:100dvh}
  .wrap{max-width:1120px;margin:0 auto;padding:28px 18px 88px;display:grid;gap:28px}
  header{display:flex;align-items:center;justify-content:space-between;gap:16px}
  .brand{font-weight:800;letter-spacing:.2px}
  .tag{opacity:.8;font-size:.92rem}
  .card{background:var(--card);border:1px solid var(--border);border-radius:20px;padding:18px}

  .grid{display:grid;gap:18px}
  @media (min-width:980px){ .grid{grid-template-columns:500px 1fr} }

  /* micro logo badge (returns!) */
  .logo-badge{
    position:fixed;left:14px;bottom:14px;z-index:20;
    display:flex;align-items:center;gap:8px;
    padding:8px 12px;border-radius:999px;background:#0f0f0f;border:1px solid #262626;box-shadow:0 6px 18px rgba(0,0,0,.25);
    font-weight:700;opacity:.9
  }
  .logo-dot{width:18px;height:18px;border-radius:50%;background:#111;position:relative;box-shadow:inset 0 0 0 2px #2a2a2a, inset 0 6px 10px rgba(255,255,255,.08)}
  .logo-dot:after{content:"8";position:absolute;inset:0;display:grid;place-items:center;font-size:12px;color:#cfcfcf;font-weight:900}

  /* 8-ball */
  .ball-wrap{display:flex;align-items:center;justify-content:center;padding:22px}
  .ball{
    width:300px;height:300px;border-radius:50%;position:relative;
    background:radial-gradient(circle at 40% 35%, #2f2f2f 0%, #0c0c0c 55%, #000 100%);
    box-shadow:0 30px 60px rgba(0,0,0,.55) inset, 0 14px 30px rgba(0,0,0,.55);
  }
  .shine{position:absolute;inset:0;border-radius:50%;
    background:radial-gradient(180px 120px at 70px 60px, rgba(255,255,255,.14), transparent 60%);}
  .triangle{
    position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
    width:170px;height:150px;
    background:linear-gradient(180deg,#6a49b8 0%,#4d35a1 100%);
    clip-path:polygon(50% 0%, 0% 100%, 100% 100%);
    display:grid;place-items:center;isolation:isolate;
    box-shadow:0 12px 28px rgba(90,60,150,.35);
  }
  /* subtle bevel + inner glow to sell the “plastic” look */
  .triangle:before{
    content:"";position:absolute;inset:0;clip-path:inherit;border-radius:0;
    background:linear-gradient(160deg, rgba(255,255,255,.18), rgba(0,0,0,.0) 40%),
               radial-gradient(120px 60px at 50% 20%, rgba(255,255,255,.16), transparent 60%),
               radial-gradient(200px 150px at 50% 120%, rgba(0,0,0,.35), transparent 60%);
    mix-blend-mode:soft-light;pointer-events:none;
  }
  .triangle:after{
    content:"";position:absolute;inset:10px 14px;clip-path:inherit;border-radius:0;
    box-shadow:inset 0 0 0 1.2px rgba(230,220,255,.25);
  }
  .tri-text{
    width:72%;font-size:11px;line-height:1.1;text-align:center;text-transform:uppercase;
    letter-spacing:.1em;color:#efe9ff;opacity:.96;text-shadow:0 1px 0 rgba(0,0,0,.55);user-select:none
  }

  /* prompt row – more room for button & answers */
  .prompt{display:grid;grid-template-columns:1fr auto;gap:10px}
  input[type="text"]{flex:1;background:#0e0e0e;border:1px solid var(--border);border-radius:12px;padding:14px;color:var(--fg);outline:none}
  input::placeholder{color:#8e8e8e}
  button{background:var(--accent);color:#062e22;border:none;border-radius:12px;padding:14px 18px;font-weight:800;cursor:pointer}
  button:hover{background:var(--accent-hover)}
  .hint{color:var(--muted);font-size:.9rem}

  /* Results */
  .results{display:grid;gap:12px}
  .row{
    display:grid;grid-template-columns:1fr auto;gap:12px;align-items:flex-start;
    background:#0e0e0e;border:1px solid var(--border);border-radius:12px;padding:12px;
  }
  .answer{font-weight:600;line-height:1.25}
  .bar{height:8px;border-radius:999px;background:#1b1b1b;overflow:hidden;margin-top:10px}
  .fill{height:100%;background:linear-gradient(90deg, #33cc99, #2ab386)}
  .pct{font-variant-numeric:tabular-nums;font-weight:800;opacity:.9}

  .tone{display:flex;align-items:center;gap:8px}
  .tone select{background:#0e0e0e;color:var(--fg);border:1px solid var(--border);border-radius:10px;padding:8px}

  .ball.shake{animation:shake .6s ease}
  @keyframes shake{
    0%{transform:translate(0,0) rotate(0)}
    20%{transform:translate(-3px,-2px) rotate(-1deg)}
    40%{transform:translate(3px,2px) rotate(1deg)}
    60%{transform:translate(-2px,1px) rotate(0deg)}
    80%{transform:translate(2px,-1px) rotate(1deg)}
    100%{transform:translate(0,0) rotate(0)}
  }

  /* compact helper text (was getting cut off) */
  details.helper{margin-top:4px}
  summary{cursor:pointer;color:var(--muted)}
  summary::-webkit-details-marker{display:none}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <div class="brand">AIght Ball</div>
        <div class="tag">See the odds, not just the answer.</div>
      </div>
      <div class="tone card" style="padding:10px 12px;">
        <span style="opacity:.8;">Tone:</span>
        <select id="toneSelect" aria-label="Tone">
          <option value="friend">Helpful Friend</option>
          <option value="confidant">Empathetic Confidant</option>
          <option value="counselor">Supportive Counselor</option>
          <option value="gm">Cinematic GM</option>
          <option value="altHistory">Alt-History Guide</option>
          <option value="auto">Auto (detect)</option>
        </select>
      </div>
    </header>

    <div class="grid">
      <!-- Left: Ball -->
      <div class="card ball-wrap">
        <div class="ball" id="ball">
          <div class="shine"></div>
          <div class="triangle"><div class="tri-text" id="ballText">See your fate below</div></div>
        </div>
      </div>

      <!-- Right: Controls + Results -->
      <div class="card">
        <div class="grid">
          <div class="prompt">
            <input id="question" type="text" placeholder="Ask anything… (e.g., 'Boston Italian tonight' or 'Should I text them back?')" />
            <button id="askBtn">Ask</button>
          </div>

          <details class="helper">
            <summary>Tip (optional)</summary>
            <div class="hint">Try location + cuisine (“I’m in Boston, craving sushi”) or decision prompts (“Quit my job?”). Local recs are scaffolded; we’ll wire APIs next.</div>
          </details>

          <div class="results" id="results"></div>
          <div class="hint" id="localTip" style="display:none;"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- tiny floating logo -->
  <div class="logo-badge"><span class="logo-dot"></span>AIght Ball</div>

<script>
/* =========================
   Core knobs
   ========================= */
let DEFAULT_OUTCOME_COUNT = 3;     // dining autoscales to 4
const MIN_PCT = 7;
const USE_DIRICHLET = true;

/* =========================
   Micro-coaching phrases (varied, not repetitive)
   ========================= */
const microAdvice = {
  friend: [
    "low effort, high vibe",
    "fits tonight’s energy",
    "keeps the budget sane",
    "quick win, no overthinking",
  ],
  confidant: [
    "respect your bandwidth",
    "check in with your future self",
    "protect your calendar",
    "set one clear boundary first",
  ],
  counselor: [
    "keep it gentle",
    "plan one safe step",
    "loop in someone you trust",
    "sleep on it if you need",
  ],
  gm: [
    "roll initiative on the smallest step",
    "bank inspiration with a tiny win",
    "avoid the random encounter of burnout",
    "loot the lesson, not just the outcome",
  ],
  altHistory: [
    "this choice compounds",
    "small deltas now become big timelines",
    "note the switching cost",
    "reversibility matters here",
  ]
};
function one(arr){ return arr[Math.floor(Math.random()*arr.length)] }

/* =========================
   Domains & specific outcomes
   ========================= */
const foodMenus = {
  italian: [
    "Cacio e pepe at a cozy trattoria",
    "Neapolitan margherita pizza (wood-fired)",
    "Tagliatelle bolognese with fresh pasta",
    "Chicken parm hero + side Caesar",
    "Arancini and a glass of Montepulciano",
  ],
  sushi: [
    "Omakase counter (chef’s choice)",
    "Spicy tuna crispy rice + miso soup",
    "Chirashi bowl (balanced + filling)",
    "Salmon nigiri flight + edamame",
    "Tempura udon for a warm comfort pick",
  ],
  thai: [
    "Pad see ew with Chinese broccoli",
    "Green curry (medium heat) + jasmine rice",
    "Tom kha soup and crispy spring rolls",
    "Pad kra pao with a fried egg",
    "Mango sticky rice for dessert",
  ],
  pizza: [
    "NY-style foldable slice joint",
    "Detroit square with frico edges",
    "Sicilian grandma pie (thick + saucy)",
    "White pie with ricotta + garlic",
    "Pepperoni cups, extra crisp",
  ]
};

const relOptions = [
  "Have the talk tonight—15 min, one outcome to decide",
  "Send a warm check-in text and suggest coffee in daylight",
  "Take 48 hours of space; write your three non-negotiables",
  "Name the pattern once without blame; propose a tiny experiment",
  "Pause the romance, keep the friendship lane open for 30 days",
];

const careerMoves = [
  "Draft a 1-page pitch and ask one mentor for notes",
  "Book an informational chat with someone doing your target role",
  "Run a 2-week experiment after hours; measure it once",
  "Delay the leap; upskill with one specific course",
  "Say no for now—protect runway and revisit in 30 days",
];

const genericPaths = [
  "Go for it (controlled scope)",
  "Wait & gather one key signal",
  "Pivot to a simpler version",
  "Say no—protect your time",
  "Ask someone you trust first",
];

function detectDomain(q){
  const text = (q||'').toLowerCase();
  const has = (re)=> re.test(text);
  if (/(italian|pasta|parm|margherita)/.test(text)) return {domain:"food", sub:"italian"};
  if (/(sushi|omakase|nigiri|chirashi)/.test(text)) return {domain:"food", sub:"sushi"};
  if (/(thai|pad see ew|green curry|tom kha|kra pao)/.test(text)) return {domain:"food", sub:"thai"};
  if (/(pizza|slice|pepperoni|neapolitan|detroit)/.test(text)) return {domain:"food", sub:"pizza"};
  if (/(date|text.*back|relationship|partner|break ?up|crush)/.test(text)) return {domain:"relationships"};
  if (/(job|career|promotion|quit|switch|offer|interview)/.test(text)) return {domain:"career"};
  return {domain:"generic"};
}

function makeOutcomes(question, n, toneKey){
  const {domain, sub} = detectDomain(question);

  if (domain === "food") {
    DEFAULT_OUTCOME_COUNT = 4;
    const pool = foodMenus[sub] || [].concat(...Object.values(foodMenus));
    return pickN(pool, DEFAULT_OUTCOME_COUNT).map(x => withAdvice(x, toneKey));
  }
  if (domain === "relationships") {
    return pickN(relOptions, n).map(x => withAdvice(x, toneKey));
  }
  if (domain === "career") {
    return pickN(careerMoves, n).map(x => withAdvice(x, toneKey));
  }
  return pickN(genericPaths, n).map(x => withAdvice(x, toneKey));
}

function withAdvice(line, toneKey){
  const bucket = microAdvice[toneKey] || microAdvice.friend;
  return `${line} — ${one(bucket)}.`;
}

function pickN(pool, n){
  const copy = [...pool], out = [];
  for (let i=0; i<n && copy.length; i++){
    out.push(copy.splice(Math.floor(Math.random()*copy.length),1)[0]);
  }
  return out;
}

/* =========================
   Tone detection
   ========================= */
const toneRenderers = {
  friend: (q, line) => line,
  confidant: (q, line) => line,
  counselor: (q, line) => line,
  gm: (q, line) => `🎲 ${line}`,
  altHistory: (q, line) => line,
};
function chooseTone(question, explicit) {
  if (explicit && explicit !== 'auto') return explicit;
  const q = (question || '').toLowerCase();
  const heavy = /(break up|divorce|death|grief|diagnos|fired|pregnan|addict|panic|abuse|unsafe)/.test(q);
  const life  = /(should i|move|quit|career|marry|have kid|college|sell|buy)/.test(q);
  const rpg   = /(dragon|goblin|quest|roll|dice|dungeon|campaign)/.test(q);
  const alt   = /(what if|counterfactual|alternate|if .* had)/.test(q);
  if (rpg) return 'gm';
  if (alt) return 'altHistory';
  if (heavy) return 'counselor';
  if (life) return 'confidant';
  return 'friend';
}

/* =========================
   Percent splitter
   ========================= */
const MIN_PCT = 7;
const USE_DIRICHLET = true;
function splitPercentages(n, minEach=MIN_PCT) {
  const totalMin = n * minEach;
  if (totalMin > 100) {
    const eq = Math.floor(100/n);
    const arr = Array(n).fill(eq);
    arr[0] += 100 - eq*n;
    return arr;
  }
  const remaining = 100 - totalMin;
  const gammas = Array.from({length:n},()=> -Math.log(Math.random()));
  const sum = gammas.reduce((s,x)=>s+x,0) || 1;
  const shares = gammas.map(g => g/sum);
  let pcts = shares.map(s => Math.floor(s*remaining));
  let used = pcts.reduce((s,x)=>s+x,0);
  for (let i=0; i<remaining-used; i++) pcts[i%pcts.length]++;
  return pcts.map(v => v + minEach);
}

/* =========================
   Local intent (still stub)
   ========================= */
function detectCityCuisine(q){
  const text=(q||'').toLowerCase();
  const city = text.includes('boston') ? 'Boston' : null;
  const cuisineMatch = text.match(/italian|sushi|thai|pizza|tacos|ramen|bbq|indian|greek|mediterranean/);
  return { city, cuisine: cuisineMatch ? cuisineMatch[0] : null };
}

/* =========================
   Rendering
   ========================= */
const elResults = document.getElementById('results');
const elBall = document.getElementById('ball');
const elBallText = document.getElementById('ballText');
const elLocalTip = document.getElementById('localTip');

function renderResults(question, toneKey) {
  elResults.innerHTML = '';

  const tone = chooseTone(question, toneKey);
  const outcomes = makeOutcomes(question, 3, tone).map(x => toneRenderers[tone](question, x));
  const pcts = splitPercentages(outcomes.length);
  const { city, cuisine } = detectCityCuisine(question);

  outcomes
    .map((label, i) => ({ label, pct: pcts[i] }))
    .sort((a,b) => b.pct - a.pct)
    .forEach(({label, pct}) => {
      const row = document.createElement('div'); row.className='row';

      const left = document.createElement('div');
      const ans = document.createElement('div'); ans.className='answer'; ans.textContent = label;

      const bar = document.createElement('div'); bar.className='bar';
      const fill = document.createElement('div'); fill.className='fill'; fill.style.width = pct + '%';
      bar.appendChild(fill);

      left.appendChild(ans);
      left.appendChild(bar);

      const right = document.createElement('div'); right.className='pct'; right.textContent = `${pct}%`;

      row.appendChild(left); row.appendChild(right);
      elResults.appendChild(row);
    });

  if (city || cuisine){
    const want = cuisine ? cuisine : 'good';
    const where = city ? `in ${city}` : 'near you';
    elLocalTip.style.display = 'block';
    elLocalTip.textContent = `🔜 Local picks scaffolded: “Find ${want} spots ${where}.” (We’ll wire Places/Yelp soon.)`;
  } else {
    elLocalTip.style.display = 'none';
  }
}

/* =========================
   Events
   ========================= */
document.getElementById('askBtn').addEventListener('click', run);
document.getElementById('question').addEventListener('keydown', e=>{
  if (e.key === 'Enter') run();
});
function run(){
  const q = document.getElementById('question').value.trim();
  const toneSel = document.getElementById('toneSelect').value;
  const tone = chooseTone(q, toneSel);
  elBall.classList.remove('shake'); void elBall.offsetWidth; elBall.classList.add('shake');
  elBallText.textContent = 'See your fate below';
  renderResults(q, tone);
}
renderResults('', 'friend');
</script>
</body>
</html>







